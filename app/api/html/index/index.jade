doctype html
html(lang="en")
    head
        title movies
        include ../includes/header.jade

    body
        .container

            mixin movieMixin(title,director,year, url, id)
                li
                    if isAuthenticated
                        button( type="button" class="remove-btn"
                            onclick="app.deleteMovie("+id+",'"+title+"');") X
                        a(href='edit/'+id) edit
                    h2= title
                    a(href='?director='+director) #{director}
                    span= year
                    a(href=url target='_blank') trailer

            h1 Movies
            a(href='/' class='pageLink') home
            if isAuthenticated
                a(href='logout' class='pageLink') logout
                a(href='new-movie' class='pageLink') add a movie
            else
                a(href='login' class='pageLink') login

            <br/>
            div.center= movies.length + ' movies'
            .moviesDirector
                ul
                    for director in directors
                        li
                            a(href= '?director=' + director.name) #{director.name} (#{director.numberMovies})
            .moviesList
                ul
                    for movie in movies
                        +movieMixin(movie.title, movie.director, movie.year, movie.url, movie.$loki)